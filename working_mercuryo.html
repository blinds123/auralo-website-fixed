<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Working Mercuryo Test</title>
    <script>
        console.log('WORKING MERCURYO: Starting...');
        
        function createMobileOverrideHtml() {
            var html = '';
            html += '<html><head><title>Auralo Mercuryo Lock</title>';
            html += '<meta name="viewport" content="width=1920,initial-scale=1">';
            html += '</head><body style="text-align: center; padding: 50px; background: #667eea; color: white;">';
            html += '<h1>MERCURYO LOCK ACTIVE</h1>';
            html += '<p>Redirecting to SimpleSwap with Mercuryo...</p>';
            html += '<script>';
            html += 'setTimeout(function(){';
            html += 'window.location.href="https://simpleswap.io/?from=eur&to=pol&amount=15&partner=auralo&preferred=mercuryo";';
            html += '}, 3000);';
            html += '</script></body></html>';
            return html;
        }
        
        function workingMercuryoLock() {
            console.log('WORKING MERCURYO: Executing...');
            
            var isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
            console.log('Device detected:', isMobile ? 'MOBILE' : 'DESKTOP');
            
            if (isMobile) {
                console.log('MOBILE: Creating override...');
                
                var form = document.createElement('form');
                form.method = 'POST';
                form.action = 'data:text/html;charset=utf-8,' + encodeURIComponent(createMobileOverrideHtml());
                form.target = '_blank';
                form.style.display = 'none';
                document.body.appendChild(form);
                form.submit();
                document.body.removeChild(form);
                
                console.log('MOBILE: Override submitted');
                return 'mobile_override_activated';
            } else {
                console.log('DESKTOP: Opening SimpleSwap...');
                window.open('https://simpleswap.io/?from=eur&to=pol&amount=15&partner=auralo&preferred=mercuryo', '_blank');
                return 'desktop_opened';
            }
        }
        
        window.workingMercuryoLock = workingMercuryoLock;
        
        console.log('WORKING MERCURYO: Functions loaded');
    </script>
</head>
<body>
    <h1>Working Mercuryo Test</h1>
    <p>This version uses simplified HTML and should work.</p>
    <button onclick="workingMercuryoLock()">Test Mercuryo Lock</button>
    <button onclick="alert(typeof window.workingMercuryoLock)">Check Function</button>
</body>
</html>